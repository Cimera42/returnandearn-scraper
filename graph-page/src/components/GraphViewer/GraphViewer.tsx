import React from "react";
import './GraphViewer.scss';
import { VictoryChart, VictoryLine } from 'victory';

const data = (
    `1575718144,3,3
    1575748860,1,1
    1575779160,2,1
    1575780720,4,1
    1575781020,1,1
    1575781320,4,1
    1575781620,1,1
    1575784320,1,4
    1575784620,1,1
    1575792420,3,3
    1575835320,1,1
    1575853920,2,1
    1575855720,1,1
    1575878820,3,3
    1575921720,1,1
    1575932760,1,4
    1575933120,1,1
    1575965220,3,3
    1576007880,1,1
    1576008540,1,4
    1576008660,1,1
    1576046760,2,1
    1576047660,1,1
    1576047780,2,1
    1576049100,1,1
    1576051320,3,3
    1576094220,1,4
    1576094310,1,1
    1576101600,4,1
    1576101660,1,1
    1576137720,3,3
    1576180620,1,1
    1576200180,4,1
    1576200300,1,1
    1576224120,3,3
    1576267020,1,1
    1576268280,1,4
    1576268310,1,1
    1576310550,3,3
    1576353390,1,1
    1576361220,2,1
    1576362510,1,1
    1576362810,4,1
    1576363140,1,1
    1576364580,1,4
    1576364610,1,1
    1576366830,4,1
    1576367070,1,1
    1576367400,4,1
    1576367550,1,1
    1576389960,4,1
    1576390080,1,1
    1576396920,3,3
    1576439820,1,1
    1576452720,1,4
    1576453050,1,1
    1576472160,2,1
    1576472460,1,1
    1576472580,2,1
    1576473330,1,1
    1576474590,2,1
    1576474650,4,1
    1576476030,1,1
    1576483320,3,3
    1576526220,1,1
    1576528140,4,1
    1576528230,1,1
    1576569720,3,3
    1576612620,1,1
    1576619760,1,4
    1576620240,1,1
    1576656120,3,3
    1576699050,1,1
    1576704990,2,1
    1576705080,1,1
    1576742520,3,3
    1576785420,1,1
    1576802760,4,1
    1576802790,1,1
    1576818360,2,1
    1576819530,4,1
    1576821300,1,1
    1576828890,3,3
    1576871820,1,1
    1576875150,1,4
    1576876020,1,1
    1576888020,2,1
    1576888590,4,1
    1576893450,1,1
    1576909860,4,1
    1576909980,1,1
    1576915320,3,3
    1576958190,1,1
    1576973400,1,4
    1576974330,1,1
    1576988850,2,1
    1576990200,4,1
    1576992090,4,4
    1576992360,4,1
    1576995840,1,1
    1577001720,3,3
    1577044620,1,1
    1577079570,2,1
    1577080740,4,1
    1577082690,1,1
    1577085540,1,4
    1577085660,1,1
    1577088120,3,3
    1577131050,1,1
    1577151150,4,1
    1577151180,1,1
    1577167020,2,1
    1577168220,1,1
    1577174370,3,3
    1577304060,1,1
    1577347320,3,3
    1577390460,1,1
    1577414880,4,1
    1577415150,1,1
    1577422470,1,4
    1577422530,1,1
    1577433690,3,3
    1577476590,1,1
    1577494830,4,1
    1577495130,1,1
    1577508300,1,4
    1577508540,1,1
    1577520120,3,3
    1577563020,1,1
    1577564790,2,1
    1577566230,1,1
    1577581260,2,1
    1577581350,1,1
    1577581650,4,1
    1577581680,1,1`.split('\n').map(s => s.split(',').map(v => parseFloat(v)))
).filter((v, i) => i < 10).map(([timestamp, plastic, glass]) => {
    const mapping = (v: number): number => {
        switch(v) {
            case 1: return 1;
            case 2: return 2/3;
            case 4: return 1/3;
        }
        return 0;
    };
    return {
        timestamp,
        plastic: mapping(plastic),
        glass: mapping(glass),
    };
});

type GraphItemProps = {
    name: string,
    extra?: string
};

const GraphItem: React.FC<GraphItemProps> = ({name, extra}: GraphItemProps) => {
    return (
        <div className="graph-item">
            <div className="graph-item-sizer">
                <div className="thumbnail">
                    <VictoryChart>
                        <VictoryLine
                            data={data}
                            x="timestamp"
                            y="plastic"
                            interpolation="stepAfter"
                            style={{data: {strokeWidth: 1.25, stroke: "blue"}}}
                        />
                        <VictoryLine
                            data={data}
                            x="timestamp"
                            y="glass"
                            interpolation="stepAfter"
                            style={{data: {strokeWidth: 1.25, stroke: "darkred"}}}
                        />
                    </VictoryChart>
                </div>
                <div className="details">
                    <span>{extra}</span>
                    <h3>{name}</h3>
                </div>
            </div>
        </div>
    )
};

const GraphViewer: React.FC = () => {
    return (
        <div>
            <h1>Graph Viewer</h1>
            <div className="graph-list">
                <GraphItem
                    name="Graph 1"
                />
                {/* <GraphItem
                    name="Graph 2"
                    extra="25/12/2019"
                />
                <GraphItem
                    name="Graph 3"
                    extra="1/1/2020"
                /> */}
            </div>
        </div>
    );
};

export default GraphViewer;
